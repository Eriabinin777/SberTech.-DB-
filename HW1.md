# CAP-теорема и СУБД

## DragonFlyDB

Данная СУБД относится к CA (consistency and availability).

###### ***Определение CA***

CA (Availability + Consistency — Parition tolerance), когда данные во всех узлах кластера согласованы и доступны, но не устойчивы к разделению. 

Это означает, что реплики одной и той же информации, распределенные по разным серверам друг другу, не противоречат друг другу и любой запрос к распределённой системе завершается корректным откликом. 

Такие системы возможны при поддержке ACID-требований к транзакциям (Атомарность, Согласованность, Изоляция, Долговечность) и абсолютной надежности сети. На практике таких решений на основе кластерных систем управления базами данных почти не существует. 

Классическим примером CA-системы называют распределённую службу каталогов LDAP, а также реляционные базы данных (PostgreSQL, MySQL, MariaDB, MS SQL Server). [Источник](https://www.bigdataschool.ru/wiki/cap).

###### ***Размышления***

Выяснить, к какому типу относится СУБД, помог [официальный сайт](https://dragonflydb.io/).  На первый взгляд сложно сказать, к какому типу он принадлежал. Первая деталь, которая зацепила в разделе Highly Scalable, - работает на одной машине. Что это означает на языке CAP-теоремы? 

Это указывает на отсутсвие так таковой устойчивости к разделению (partition tolerance), поскольку данную систему нельзя разделить на несколько. Это соответствует и другим реляционным баз данных, упомянутых выше.

Вторая и третья деталь находятся на странице [features](https://dragonflydb.io/features). Собственно, эффективность и производительность указывают на то, что система доступна и согласована (CA), проще говоря, работает быстро и качественно. Режим работы - асинхронный, запросы завершаются корректно и быстро, высокая пропускная способность. 

## ScyllaDB

Данная СУБД относится к AP (availability and partition tolerance).

###### ***Определение AP***

AP-система (Availability + Partition tolerance — Consistency) не гарантирует целостность данных, обеспечивая их доступность и устойчивость к разделению, например, как в распределённых веб-кэшах и DNS. 

Считается, что большинство NoSQL-СУБД относятся к этому классу систем, обеспечивая лишь некоторой уровень согласованности данных в конечном счете (eventually consistent). 

Таким образом, AP-система может быть представлена кластером из нескольких узлов, каждый из которых может принимать данные, но не обязуется в тот же момент распространять их на другие сервера. 

Такая система отлично справляется с отказами нескольких узлов, но, когда они снова начинают работать, возможна выдача пользователям старых данных. К AP-системам относят CoucheDB, Cassandra, Riak, Amazon DynamoDB. [Источник](https://www.bigdataschool.ru/wiki/cap).

###### ***Размышления***

Здесь было достаточно просто узнать, как какому типу относится данное БД. Достаточно было перейти на [официальный документ СУБД](https://docs.scylladb.com/stable/architecture/architecture-fault-tolerance.html). 

В конце документа разбирается CAP-теорема. После же говорится о том, что согласованности быть не может, так как теряется высокоустойчивость - основная фишка этой БД. За счет дополнительной отказоустойчивости, расмотренная выше в этой статье, достигается постоянная работа приложения (не выходит из строя).

Также можно было догадаться и без этого документа. На [официальном сайте](https://www.scylladb.com/scylla-vs-cassandra/) сравнивают Scylla и Cassandra. В целом, рассматриваемая СУБД дублирует характеристики Cassandra. Она же в свою очередь является типичным примером AP.

## ArenadataDB

Данная СУБД относится к CP (consistency and partition tolerance).

###### ***Определение CP***

